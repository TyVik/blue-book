# Управление сервисами и процессами

Буква `d` (от `daemon`) в конце имени означает, что это служба (`sshd`, `systemd` и т.д.)

`systemctl действие процесс` - команда для управления процессами/службами (просмотреть статус, остановить, запустить и т.д.)

- `systemctl start ssh` - запускает службу `ssh`
- `systemctl status ssh` - просмотр статуса службы `ssh`
- `systemctl enable ssh` - добавление службы в автозапуск при загрузке системы

`ps -aux | grep ssh` - проверка состояния службы (например, после перезагрузки системы)

`systemctl list-units --type=service` - просмотр списка всех процессов

`journalctl -u ssh.service --no-pager` - показывает проблемы при запуске службы

`kill -l` - команда для управления “жизнью” процесса (да да, вот так вот)

Самые часто используемые сигналы процессам:

- `1`, `SIGHUP` - отправляется процессу, когда управляющий им терминал закрыт
- `2`, `SIGINT` - отправляется, когда пользователь нажимает `CTRL+C` на управляющим терминале, чтобы прервать процесс
- `3`, `SIGQUIT` - отправляется, когда пользователь нажимает `CTRL+D` для выхода
- `9`, `SIGKILL` - немедленное завершение процесса без операций чистки
- `15`, `SIGTERM` - завершение процесса
- `19`, `SIGSTOP` - останавливает процесс (к нему больше нельзя обратиться)
- `20`, `SIGTSTP` - отправляется, когда пользователь нажимает `CTRL+Z` для приостановки службы (позже можно обратиться к службе)

`ping -c 10 www.hackthebox.eu` - отправка сигнала приостановки процесса `www.hackthebox.eu`

`jobs` - отображает все фоновые процессы

`bg` - переводит процесс в фоновый режим

`ping -c 10 www.hackthebox.eu &`  - аналог для перевода в фоновый режим

`fg номер_процесса` - команда перевода процесса обратно на передний план для взаимодействия с ним

Способы запуска нескольких команд подряд:

- `;` - `echo 1; echo 2; echo 3` - просто запускает команды одну за одной игнорируя уведомления об ошибках (если такие будут)
- `&&` - `echo 1 && ls MISSING_FILE && echo 3` - если возникает ошибка, то дальнейшие команды не запускаются
- `|` - `echo 1 | ls MISSING_FILE | echo 3` - не только не игнорирует уведомления об ошибках, но и берёт во внимание результат работы предыдущих команд