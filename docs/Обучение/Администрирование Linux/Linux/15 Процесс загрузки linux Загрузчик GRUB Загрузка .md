# 15 Процесс загрузки linux. Загрузчик GRUB. Загрузка ядра

### Процесс загрузки Windux.

### 1. Включение компьютера и инициализация BIOS/UEFI

После включения питания компьютера, BIOS или UEFI (в зависимости от системы) выполняет начальную проверку аппаратного обеспечения (POST), инициализирует устройства и ищет загрузочный диск.BIOS/UEFI считывает первый сектор (MBR или GPT) выбранного загрузочного устройства, где находится загрузчик GRUB.

### 2. Загрузка GRUB

GRUB начинает свою работу с отображения меню выбора, если настроено несколько операционных систем или различных конфигураций ядра Linux. Пользователь может выбрать конкретную систему или версию ядра для загрузки. Если выбор не сделан в течение определенного времени, будет загружена система по умолчанию.GRUB загружает в память ядро Linux и, если это необходимо, initrd (начальный RAM диск), который содержит временную файловую систему и драйверы, необходимые для загрузки реальной файловой системы.

### 3. Загрузка ядра Linux

После загрузки ядра и initrd в память, GRUB передает управление ядру .Ядро инициализирует аппаратное обеспечение, драйверы устройств и создает необходимые структуры данных. Ядро монтирует initrd как временную корневую файловую систему и запускает первый процесс (обычно `/sbin/init` или системный менеджер `systemd` в более новых системах).

### 4. Инициализация системы

Системный менеджер (`init` или `systemd`) принимает на себя управление, запускает сервисы и скрипты инициализации, монтирует корневую файловую систему и осуществляет переход к многопользовательскому режиму работы. После завершения всех инициализационных скриптов и запуска всех необходимых сервисов, система становится готовой к использованию. Пользователю отображается экран входа в систему или графический интерфейс, если он установлен и настроен для автозапуска.

GRUB (GRand Unified Bootloader) — это мощный и гибкий загрузчик, предназначенный для управления процессом загрузки операционных систем на компьютерах. Он разработан как часть проекта GNU и широко используется в различных дистрибутивах Linux, хотя может загружать и другие операционные системы, такие как Windows, FreeBSD и другие.

### Основные характеристики GRUB:

- Мультизагрузка: GRUB позволяет на одном компьютере иметь несколько операционных систем и выбирать, какую из них загрузить при старте системы. Это делает его особенно полезным в средах для тестирования или при использовании различных ОС для разных задач.
- Гибкая настройка: GRUB предлагает широкие возможности для настройки процесса загрузки, включая изменение параметров ядра, времени ожидания перед загрузкой по умолчанию, внешнего вида меню загрузки и многого другого.
- Поддержка различных файловых систем: GRUB может читать и загружать ядра операционных систем с большинства современных файловых систем, включая ext3/4, btrfs, xfs, FAT и NTFS. Это обеспечивает высокую совместимость с различными средами и конфигурациями.
- Интерактивный режим: Помимо автоматической загрузки предварительно настроенной ОС, GRUB предоставляет интерактивный режим, в котором пользователи могут вручную редактировать параметры загрузки или вводить специальные команды для устранения проблем с загрузкой.
- Поддержка сетевой загрузки: GRUB поддерживает загрузку операционных систем по сети, что может быть полезно для системных администраторов и в средах с большим количеством машин.
- Восстановление: В случае проблем с загрузкой, GRUB может использоваться для загрузки в режим восстановления или использования специальных утилит для восстановления системы.

### Версии GRUB

Существует две основные версии GRUB: GRUB Legacy (GRUB 1) и GRUB 2. GRUB 2 является более новой версией с улучшенной архитектурой, лучшей поддержкой современного аппаратного обеспечения и расширенными возможностями настройки. Большинство современных дистрибутивов Linux используют GRUB 2 в качестве стандартного загрузчика.

### Конфигурация

Конфигурационный файл GRUB обычно находится в `/boot/grub/grub.cfg` (для GRUB 2) или `/boot/grub/menu.lst` (для GRUB Legacy). Однако рекомендуется не редактировать эти файлы напрямую, а использовать специальные утилиты или конфигурационные файлы высокого уровня (например, `/etc/default/grub` для GRUB 2), а затем генерировать основной конфигурационный файл с помощью команды `update-grub` или аналогичной.

GRUB представляет собой ключевой компонент системы загрузки в Linux и других операционных системах, обеспечивая гибкость, надежность и удобство управления процессом загрузки.