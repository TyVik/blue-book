# 34 Назначение docker-compose Синтаксис docker-compose.yaml Работа с docker-compose

## Назначение

Docker Compose – это инструмент для определения и запуска многоконтейнерных приложений Docker. С его помощью вы можете использовать YAML-файл для конфигурации услуг вашего приложения. Это касается не только параметров самого приложения, но и его зависимостей (таких как базы данных, кеш-серверы, файловые хранилища и так далее). Это позволяет вам запустить все сервисы одной командой, что значительно упрощает развертывание сложных приложений. 

По умолчанию, докер композ создают одну сеть для все контейнеров внутри типа bridge. 

## Синтаксис

```yaml
version: '3'
services:
  web:
    image: mywebapp:latest # образ, используемый для создания контейнера
    ports: 
      - "80:80" # проброс портов
    volumes: 
      - .:/code # монтирование тома
    depends_on:
      - db # зависимость от другого сервиса
  db:
    image: postgres:latest
    environment:
      POSTGRES_PASSWORD: mysecretpassword # установка переменных окружения
```

## Работа

Запуск приложения: Чтобы запустить ваше приложение с конфигурацией, указанной в `docker-compose.yaml`, используйте команду:

`docker-compose up`

Остановка приложения: Чтобы остановить и удалить все контейнеры, которые были созданы при запуске `docker-compose up`, используйте:

`docker-compose down`

Масштабирование сервисов: Если вы хотите запустить больше одной копии определенного сервиса, например для масштабирования, вы можете использовать:

`docker-compose up --scale web=3`

Это запустит три копии сервиса `web`.

Просмотр логов: Чтобы просмотреть логи всех контейнеров, запущенных через Docker Compose, можно использовать:

`docker-compose logs`