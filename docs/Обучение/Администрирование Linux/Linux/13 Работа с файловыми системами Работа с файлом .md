# 13 Работа с файловыми системами. Работа с файлом подкачки

### *Работа с файловыми системами*

1. Проверка файловой системы: Для проверки файловой системы на ошибки используется команда `fsck`. Она должна запускаться на размонтированном разделе, чтобы избежать повреждения данных. Если раздел активен, можно воспользоваться этой командой при следующей перезагрузке системы.

Пример:
****`sudo fsck /dev/sda1`

**2.** Монтирование файловой системы: Для монтирования файловой системы используется команда `mount`. Это позволяет получить доступ к файлам и каталогам на разделе.

Пример:
****`sudo mount /dev/sda1 /mnt`

**3.** Размонтирование файловой системы: Чтобы безопасно отключить файловую систему, используется команда `umount`.

Пример:
****`sudo umount /mnt`

**4**. Изменение размера файловой системы: Для изменения размера файловой системы можно использовать инструмент `resize2fs` для ext4 или соответствующие инструменты для других файловых систем. Обычно это делается после изменения размера раздела.

Пример:
`sudo resize2fs /dev/sda1 20G`  <размер>, в нашем случае 20 гб

### *Работа со Swap*

**S**wap в Linux — это механизм виртуальной памяти, который позволяет системе использовать дисковое пространство для хранения данных, которые не помещаются в оперативной памяти (RAM). Это особенно полезно для систем с ограниченным объемом RAM.

### *Проверка существующего Swap пространства*

Перед созданием нового swap файла рекомендуется проверить, не настроено ли уже swap пространство на системе:
****`swapon --show`

Эта команда отобразит список активных swap пространств, если они есть.

### *Создание Swap-файла*

Аллоцирование файла — это процесс выделения дискового пространства для создания файла определенного размера. В контексте создания swap файла в Linux, это означает выделение места на жестком диске для файла подкачки, который будет использоваться как виртуальная память.

Команда, часто используемая для аллоцирования файла подкачки, — `dd`. Эта команда позволяет создать файл нужного размера, заполнив его нулями (или другими данными, в зависимости от параметров команды).

Аллоцирование файла подкачки: cоздаём файл подкачки с помощью команды `dd`, указав размер файла и размер блока:
****`dd if=/dev/zero of=/swapfile bs=1M count=1024`

В этом примере создается swap файл размером 1 ГБ (1024 блока по 1МБ).

Настройка прав доступа: установите права доступа к файлу так, чтобы только пользователь root имел к нему доступ:
****`chmod 600 /swapfile`

Это обеспечивает безопасность файла подкачки.

Форматирование swap файла: Используйте команду `mkswap` для разметки файла как swap пространства:
****`mkswap /swapfile`

После выполнения этой команды файл будет готов к использованию как swap.

### *Активация Swap-файла*

Подключение swap файла к системе: Активируйте swap файл с помощью команды `swapon`:
`swapon /swapfile`

Теперь система будет использовать созданный файл как дополнительное swap пространство.

### *Автоматическое подключение Swap при загрузке*

Для автоматического подключения swap файла при каждой загрузке системы, добавьте его в файл `/etc/fstab`:
`echo '/swapfile none swap sw 0 0' >> /etc/fstab`

Это гарантирует, что swap файл будет активирован автоматически при старте системы.

### *Важные замечания*

Перед созданием swap файла убедитесь, что на диске достаточно свободного места. Использование swap увеличивает количество доступной системной памяти, но может снизить производительность из-за медленного доступа к диску по сравнению с RAM. Всегда следите за использованием swap пространства в системе, чтобы избежать чрезмерного его использования, что может привести к снижению производительности.

Создание и настройка swap файла — это эффективный способ расширения доступной системной памяти на Linux-системах, особенно для устройств с ограниченным объемом оперативной памяти.