# 41 Синхронная обработка запросов. Воркеры WSGI

## 41. Синхронная обработка запросов. Воркеры WSGI

**Синхронная обработка запросов** - это подход, при котором сервер обрабатывает запросы последовательно, то есть один за другим. При этом каждый следующий запрос начинает обрабатываться только после того, как предыдущий был полностью обработан.

В контексте веб-серверов и **WSGI**, синхронная обработка работает так: когда сервер получает запрос от клиента, он обрабатывает запрос, генерирует ответ, отправляет его обратно клиенту и только потом переходит к следующему запросу. Если сервер обрабатывает тяжелый запрос, который требует много времени для обработки, все остальные клиенты будут вынуждены ждать.

Этот подход обычно используют, когда требуется упорядоченное выполнение задач или если важно осуществлять контроль за потоком выполнения.

**WSGI (Web Server Gateway Interface)** - это стандарт взаимодействия между веб-сервером и веб-приложениями на Python.

**Воркеры WSGI** - это процессы, которые используются сервером для обработки запросов. Они могут быть многопоточными (multi-threaded) или многопроцессорными (multi-process).

Воркер обрабатывает одно соединение за раз. Например, при получении HTTP-запроса воркер загружает и вызывает соответствующую функцию из вашего приложения, затем передает результирующий ответ обратно клиенту.

Число воркеров указывает, сколько запросов сервер может обрабатывать одновременно. Если у вас есть сервер с 4 воркерами, то он сможет одновременно обрабатывать 4 запроса.

В качестве практического примера вы можете взять сервер Gunicorn, который позволяет запускать воркеры для обработки запросов к вашему WSGI-приложению. При запуске сервера вы можете указывать число воркеров с помощью параметра `-w` или `--workers`.

Пример команды для запуска сервера с 4 воркерами:

```bash
**gunicorn -w 4 myapp:app**
```

В этом случае `myapp` - это имя python-модуля, а `app` - это WSGI-приложение.

Но обратите внимание, что количество воркеров необходимо выбирать с осторожностью. Если их слишком много, сервер может потреблять слишком много ресурсов. Если их недостаточно, сервер может не справляться с нагрузкой.

---